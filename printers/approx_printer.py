import matplotlib
matplotlib.use('Agg')
import matplotlib.patches as mpatches
import random
import math
import numpy as np
import matplotlib.pyplot as plt
import itertools
from matplotlib import rcParams
from matplotlib.backends.backend_pdf import PdfPages
#import edf_vd
#import rounded_mixed_task_builder
name='test'

# Information about the general task set
tasksinBkt = [5]

# Information about the mixed task set
wcetF2 = 2.2/1.2
wcetF3 = 3.4/1.2
wcetF4 = 1.7/1.4

faultRate = [10**-6.]

hardTaskFactor = [wcetF2]
numDeadline = [1]

numberOfRuns = 100

fileName = 'mp_tasks'+repr(5)+'_utilization'+repr(60)
folder = 'comparison/'

# plot in pdf
pp = PdfPages(folder + fileName + '.pdf')
title = 'Tasks:'+repr(5)+', ErrorRates: '+ repr(10**-6.) + ', NumMisses:'+repr(1)
plt.title(title, fontsize=20)
plt.grid(True)
plt.ylabel('DMP', fontsize=20)
#plt.xlabel('Approaches($U^*$)', fontsize=20)
ax = plt.subplot()
ax.set_yscale("log")
ax.set_ylim([10**-114,10**1])
ax.tick_params(axis='both', which='major',labelsize=16)

'''
box = mpatches.Patch(color='blue', label='First to Third Quartiles', linewidth=3)
av = mpatches.Patch(color='red', label='Median', linewidth=3)
whisk = mpatches.Patch(color='black', label='Whiskers', linewidth=3)
plt.legend(handles=[utilization], fontsize=12, frameon=True, loc=3)
'''

labels = ('CPRTA','EPST-K', 'CRPTA','EPST-K')
#construct the box plot input
bxinput = []
#utilization 60%
c_prob = [2.000019999932999e-24,4.299985400023098e-29,1.0000000000299993e-24,1.0999986999993987e-17,1.899981790532434e-46,5.299963600376597e-35,2.000004999980002e-12,4.000000999965999e-12,9.99999999999999e-07,4.0000359999649945e-24,1.0000039999939986e-12,1.0000050000274983e-23,2.999997999999999e-12,1.0000130000419975e-24,3.000102998880003e-18,1.0000020000219994e-18,1.0000000000029985e-24,6.800057399683706e-53,1.0000020000379985e-12,5.000031999669995e-24,8.99998999995899e-18,1.0000419998609994e-24,1.0000039999939994e-12,6.299973799936491e-23,1.0000419998859996e-30,2.999998000002999e-12,9.499973600028288e-47,1.0000449998549986e-24,1.0000000000009986e-12,1.0000139999599996e-18,4.299968500136494e-29,7.000038999907978e-54,3.999996000465983e-24,1.999998999999997e-18,9.999999999999991e-07,1.0000059999859993e-12,7.99997200007299e-18,9.000047999621988e-24,1.219990670046639e-40,1.7999956000118013e-29,1.0000179999199999e-18,2.0000199998879996e-12,9.999999999999995e-07,1.0999980000012986e-17,2.699993300013092e-35,1.0000079999850004e-12,1.3199946200092632e-34,1.5499972099562594e-34,1.0000079999819993e-12,6.999988000008991e-18,2.0000079999760006e-12,5.599979000036394e-29,6.999979000036001e-12,2.999997999999999e-12,8.999984000008992e-18,2.9999990000339972e-18,1.0000459999320002e-36,9.999999999999992e-13,1.999999000005e-12,9.999999999999991e-19,1.9999989999999978e-12,1.699998799996e-29,9.99999999999999e-07,1.0000009999989997e-12,1.000001000022999e-12,3.000106999669997e-30,3.0000019999929985e-18,1.0000000000009988e-12,1.0000099999699995e-12,2.380360933919244e-34,1.1099964000046102e-34,9.99999299995499e-18,1.0000819998069976e-48,9.999999999999986e-13,5.9999959999969964e-18,3.999996999989995e-18,1.000000000011999e-12,2.0999917000170995e-23,9.999999999999993e-07,5.759971900051953e-40,1.3000775996771977e-53,5.000006399957891e-35,1.0000065001965953e-29,1.0000059999889999e-12,1.9999989999999994e-12,3.999997000720028e-30,1.9999990001199957e-18,3.0235922678704105e-95,6.000001499961393e-35,3.1999901000131974e-23,1.0000049999879999e-12,9.999999999999984e-13,2.000005000018999e-12,9.999999999999977e-25,3.4319809810450427e-63,1.0000199999139993e-18,1.0000079999819995e-12,9.999999999999999e-19,1.000000000000999e-12,1.4890520766113673e-111]
#c_prob = [4.9999940000129956e-18,2.9999990001009956e-24,5.999996999997994e-24,1.9999968000011982e-29,1.0000129999659995e-18,1.9999989999999994e-12,5.999985000044991e-30,9.999980000014999e-24,4.999999000068995e-24,1.0499966000076882e-40,1.0000429998370001e-18,1.0000029999969997e-18,3.999995000001999e-12,7.699969300045396e-23,2.0000005999844981e-29,1.999999999998999e-12,1.0000029999950007e-12,1.0000000007799919e-24,3.000000999994001e-12,1.0000000000009985e-18,1.1001264992464006e-65,1.0000060000129992e-12,3.6000033998243003e-35,1.049997390002169e-46,9.000047999691986e-48,6.999979000139991e-24,3.499983300040798e-23,1.0000000000539987e-18,9.999999999999978e-19,7.000005999928002e-24,8.999977800020097e-53,1.0000089999849974e-24,1.0000069999919992e-12,1.0000030000019994e-12,1.000002000007999e-12,2.429972174218113e-106,2.99999800039599e-24,8.000043999824996e-30,1.0000000004899954e-42,1.000002000004999e-12,1.4999961900024377e-46,5.000049999830995e-30,2.9999979999999954e-24,2.000019999887999e-12,9.99999999999999e-07,2.9999980000019995e-12,3.1999925000065965e-29,1.9999999999989995e-12,3.999994000034e-12,1.0000029999999984e-42,1.899993700010499e-17,9.999999999999993e-07,5.491119646275554e-79,1.0001499988920029e-18,9.000014999893992e-24,4.9999900000199964e-18,3.999998999978003e-12,4.549959050428771e-64,1.0000559998489998e-30,8.999964000084007e-12,1.0036889986679014e-60,1.0000069999819992e-18,1.999999000000999e-18,1.0000068002087961e-53,6.999988000238995e-24,3.000000000002996e-30,3.999994000003996e-12,1.0000010000049994e-12,1.3999912000416988e-23,1.000000000011999e-24,7.899961000154395e-29,9.999999999999987e-07,8.880987797875553e-93,9.000037999805996e-24,1.0000335999069984e-23,1.000014999944999e-12,3.0000069999819974e-18,1.0000040000159988e-12,3.999995000000002e-12,2.099994699986799e-17,1.3000009999867017e-23,6.999979000036e-12,1.0000119999589995e-12,9.999999999999995e-07,5.409969640079017e-34,1.0000279998600237e-18,2.999997999999998e-12,1.0000029999949995e-12,1.000016999974e-18,5.0000149999609916e-24,3.100007499842899e-35,5.000020999909997e-18,9.999920020299835e-28,9.000031999852995e-24,1.5999985001084984e-29,1.4000090998725994e-29,5.600012599945795e-59,3.000000999990997e-24,8.99998800001599e-30,5.499983600018988e-29]
seq_prob = [3.30016966597847e-14,2.75664374781704e-24,3.20435426546542e-23,3.30019246432726e-14,3.64714420753473e-37,3.08794425598051e-30,2.96594964634638e-9,1.14092222409372e-7,6.72521900364676e-6,1.42556951277885e-20,4.91182188108047e-12,4.02145007430715e-16,2.77556929890508e-8,5.11098952201583e-22,4.82313518250758e-10,5.03608014289843e-15,3.15108624016381e-16,4.20385337800498e-47,1.47323493337618e-8,1.87449216553982e-13,5.90809344513721e-14,2.91487638954902e-21,1.23795311183383e-12,1.05558701236598e-14,1.41887638628471e-28,3.60609813126001e-8,6.10723433852748e-29,2.84402978638661e-20,4.56578560963841e-10,3.71351607740692e-16,4.38996253272001e-24,1.39023696268572e-46,2.36323043403712e-20,1.57243980682351e-17,6.07549976402751e-6,4.39520330500310e-10,1.62564363835180e-10,8.07921667361817e-19,2.98418254326729e-33,9.24320203637736e-24,6.99085720530028e-15,1.50171979909588e-9,3.47776024166900e-6,1.84440388895791e-12,6.18383295024122e-30,4.07290298395455e-9,9.98804360957152e-30,6.07423612809120e-18,1.40035529169722e-9,1.22509671846813e-14,6.86877175020489e-10,6.57097801092569e-23,6.38178182727373e-8,5.95028798930156e-9,1.09918636811758e-13,1.32724600524632e-16,1.38567436019597e-34,1.27776147003587e-10,5.03205587387178e-12,6.72904601828374e-15,2.21320340892023e-8,2.79623205456599e-25,3.47589311816994e-6,3.76639413447188e-12,1.14730226061024e-9,4.90446386001939e-28,1.79476036895840e-17,4.24727387826095e-12,2.92123452251512e-12,1.69517048186733e-13,7.41602436524573e-30,8.98347021834336e-16,1.69265625090690e-46,2.63175932644079e-11,2.44425081055396e-16,1.03670972776180e-13,4.25827301796674e-9,1.68846454873150e-12,2.14751883586361e-6,1.90363621511402e-36,1.14973527506056e-46,1.16068665830534e-20,1.98712422876033e-24,8.14976683779445e-12,4.94390565640557e-8,6.98405322280197e-25,1.29513473264830e-15,8.56469552299463e-40,2.57295133480894e-30,5.97971120878140e-18,3.93654721394275e-11,2.29867114237693e-9,3.08127305684610e-9,1.18391418460842e-24,3.60590811914982e-43,1.51564953945992e-16,1.05937846526680e-10,9.36172346316489e-17,1.03843212287485e-8,2.75880592204005e-48]
#seq_prob = [3.09994280876721e-14,1.07827137324259e-22,4.70294197902760e-20,5.28588816352417e-24,1.18978229521979e-17,6.62767013492596e-11,7.15992527934417e-24,1.59396473878455e-16,1.63467501376284e-18,9.96588738715442e-28,2.74940446253441e-17,6.96160633742114e-16,4.57141150106145e-10,2.01615422625374e-16,4.03614609354253e-16,1.22100059533084e-9,8.96582060345327e-12,1.39536076448715e-16,1.93021831715931e-10,4.89403672789698e-14,2.95997422738604e-36,7.43393165838713e-9,1.02992096387890e-28,5.21287054966800e-33,1.99512958321197e-24,1.67765571832771e-17,7.81771800664882e-16,2.20663188927851e-15,6.91661899626524e-16,3.98131541113058e-13,3.20124195429545e-23,2.02812177068717e-24,4.58193943230083e-10,1.92309879484660e-11,7.15613467747816e-11,1.31258795794491e-46,8.61700579269115e-20,1.65209821720047e-17,1.81953310886854e-31,9.64590190213171e-12,1.22160010755623e-25,7.64813289455897e-28,1.46311776360104e-19,2.51451066697627e-10,6.93706604570435e-6,8.91673314319581e-9,5.43929063394651e-24,2.94690223540363e-10,1.52903915054393e-8,2.05447768513974e-39,8.33465093947088e-12,4.43002862264067e-6,5.97651219823437e-33,3.19061264131250e-13,3.89257778993597e-15,3.40293403381749e-15,2.06972019931089e-8,1.54213463174430e-40,5.33043457766265e-29,1.52982609488581e-8,3.27757782452153e-25,1.69767534052950e-16,5.39201396208816e-14,1.64150944817566e-39,7.01712594829333e-17,1.11898412421985e-25,1.32221888266525e-7,6.55099565194621e-10,1.03955583446928e-17,1.23778038044202e-24,8.34984028346053e-23,1.67025647740697e-5,1.24528234431020e-34,5.02607314609988e-19,4.13918536073257e-13,6.93874171745118e-9,3.11786098468378e-13,1.92344962971851e-11,1.23352387463863e-9,1.40899958884099e-11,3.06725588813148e-18,9.24642214506141e-7,4.72709520863358e-9,4.20124349633753e-6,1.93206702406234e-22,8.54914272533223e-13,1.61540802547173e-11,3.30237320218602e-11,2.53330489027997e-15,2.42179770996140e-21,3.69249608904209e-27,1.27053501509589e-15,6.99625186501291e-12,5.86720365369134e-19,6.39292047053030e-20,2.95672287382896e-23,1.57392079813456e-31,6.08427691182365e-21,1.27279061494825e-26,1.43837383186069e-18]
bxinput.append(c_prob)
bxinput.append(seq_prob)
#utilization 70%
c_prob = [6.000215997978e-18,8.499966100064095e-23,1.999999000019998e-12,1.0000019999969981e-06,2.000103998880005e-12,1.0000010000089986e-06,9.999999999999993e-07,1.9999999999979963e-06,9.999985000057985e-18,9.99999999999999e-13,1.0000089999549992e-06,1.0000099999699987e-06,2.3999936000143994e-17,2.9999970001659943e-12,3.000036999733999e-18,2.0000049999959986e-12,5.700031499755278e-29,1.9999989999999984e-06,9.999999999999993e-07,4.2999857000196056e-17,1.9999989999999976e-06,8.999980000024999e-12,7.000027999694983e-18,1.0000000000009982e-06,3.099991000020298e-17,3.999997000029997e-12,1.000006000079999e-12,1.000005999986999e-06,1.000000999998999e-06,1.9999989999999976e-06,1.0000010003239954e-12,1.0000000000039986e-06,1.0000159999279987e-12,1.0000029999959983e-12,2.000002999985997e-06,2.999999000006997e-12,1.0000000000009984e-06,1.0000000000059993e-06,9.999999999999983e-07,3.0000079999699997e-12,1.000006000003998e-12,2.000001000000998e-06,8.999980000475985e-12,2.000031999996997e-12,1.000001000012999e-06,1.0000089999739995e-06,2.8999915999997e-17,5.9999929999439935e-12,9.999999999999995e-07,1.0000599996609992e-12,3.000050999529e-12,1.6999961000130006e-17,2.3999866000440966e-11,1.0000000000029993e-06,1.0000299999579998e-18,2.209984650062551e-28,1.000000000001999e-06,8.259976480083511e-34,4.999998999988002e-12,9.99999999999999e-07,1.0000069999719979e-06,9.999999999999995e-07,2.4999701002334933e-11,1.0000000000199988e-06,2.000003999983998e-06,4.0999946999869e-23,3.0000049999809993e-12,1.0000079999879998e-12,4.000047999466999e-12,2.613943270684332e-21,1.0000179999749989e-12,4.0000009999860014e-12,9.999999999999991e-07,2.9999979999999966e-12,9.999983000040001e-12,1.0000000000129985e-06,9.999999999999991e-07,5.000171997698009e-12,5.999985000023003e-12,1.500023299872901e-23,8.999971000082008e-12,9.999999999999991e-07,1.0000059999929989e-12,3.000012999960003e-12,1.0000020000019986e-06,3.999998000006002e-12,1.9999989999999976e-06,5.9999920000020014e-12,3.0000039999909976e-12,1.000001000005999e-06,5.000072998972999e-12,2.8999988999825e-23,9.999999999999991e-07,4.000317998493994e-24,9.999985000038997e-18,7.999946200384688e-23,3.0000000000059992e-12,5.999999000015004e-12,1.0000129999319975e-06,5.999992000002002e-12]
seq_prob = [1.91503863275395e-14,1.41604686083739e-17,5.13624865568449e-11,2.54967206611060e-5,1.07452957800419e-10,2.51202723184725e-6,0.000345671008196970,2.60728647334625e-5,9.46946496187964e-15,9.95066771106099e-7,0.000659665494817425,0.000230048668316556,3.13513712376231e-12,1.04339596411510e-8,1.70535071481205e-16,1.77777545614332e-11,4.78863724983261e-24,8.09404854179454e-5,0.000315486913191022,3.06716270924022e-12,0.000114718692907454,1.03051210701819e-7,2.17234804324063e-15,1.04165326867551e-5,8.41307158565921e-12,5.92905893986318e-10,6.19681892062967e-11,3.84777758569692e-5,1.36909968780410e-5,0.00162958406305446,2.80642975460677e-8,1.36620399693002e-5,1.09954541041939e-11,1.51635076198564e-11,5.28041424440838e-6,3.52986448196850e-8,1.48174997509485e-5,0.000369980733056708,1.55058901889512e-6,7.93056469203836e-8,5.04513955924693e-12,0.00379319743968822,1.15758480725772e-6,1.90464212293076e-10,3.81526672755153e-6,9.36550041803825e-5,5.67861900496121e-11,1.31736703695878e-8,2.22035197604501e-6,3.13807330209142e-9,1.62978921904436e-8,5.37374754609827e-13,2.19447909439049e-6,2.47771767701766e-6,6.11673574397090e-16,3.56148383683930e-23,0.000190264757812500,5.26394299058656e-22,6.68113811390016e-9,0.000196550345842834,2.70251479425402e-5,0.000155296050982805,8.99310577541814e-7,4.75468375878728e-5,5.63415946365959e-5,8.29930389284309e-17,4.49518678164934e-11,7.88901668661621e-9,1.08773532530356e-9,5.32771571878599e-12,2.18195478491333e-10,4.41902729961556e-9,0.00179222810816354,1.15860483343113e-8,4.65329386443985e-8,0.000932384845138130,9.93766714567369e-5,2.55939464100864e-6,4.40353205307898e-7,8.89339635431242e-20,2.70608280770304e-7,0.000295207631653434,5.24336478220786e-11,3.41895494381054e-11,0.000255995321394225,1.60350285610025e-9,0.00502173890045884,4.33108480871757e-8,3.09911222599682e-9,9.21629341610971e-5,4.96878543328512e-7,2.13644617188043e-19,8.01988382482564e-6,1.62464722493914e-20,2.84806300145710e-16,1.53720482561137e-18,3.07546801328646e-8,1.34301736932705e-7,6.82961141414877e-6,1.06818730838901e-6]
bxinput.append(c_prob)
bxinput.append(seq_prob)

try:
    ax.boxplot(bxinput, 0, '', labels=labels)
except ValueError:
    print "ValueError"

ax.vlines(0.5, 0, 1, transform=ax.transAxes )
ax.text(0.35, 0.04, "$U^*=60\%$", transform=ax.transAxes, size=16 )
ax.text(0.85, 0.04, "$U^*=70\%$", transform=ax.transAxes, size=16 )

figure = plt.gcf()
figure.set_size_inches([10, 4])

pp.savefig()
plt.clf()
pp.close()

